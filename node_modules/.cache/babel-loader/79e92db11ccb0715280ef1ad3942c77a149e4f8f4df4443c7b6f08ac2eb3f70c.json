{"ast":null,"code":"import { IonButtons, IonContent, IonHeader, IonMenuButton, IonPage, IonTitle, IonToolbar, IonInput, IonCard, IonCardHeader, IonCardContent, IonButton, IonLabel, loadingController } from '@ionic/vue';\nimport { useAuthStore } from '@/stores/auth.js';\nimport axios from 'axios';\nimport { ref, reactive } from 'vue';\n// import { useRoute } from 'vue-router'\nexport default {\n  name: \"user-profile\",\n  data: function () {\n    return {};\n  },\n  setup() {\n    const authStore = useAuthStore();\n    const error = ref(null);\n    const success = ref(null);\n    const profile = reactive({\n      name: authStore.user.name,\n      email: authStore.user.email,\n      phone: authStore.user.phone,\n      address: authStore.user.address,\n      area: authStore.user.area,\n      avatar: authStore.user.avatar\n    });\n    const submit = async () => {\n      const loading = await loadingController.create({\n        message: 'Updating Proile...',\n        spinner: 'bubbles'\n      });\n      loading.present();\n      await axios.post('/api/v1/auth/update-profile', profile, {\n        headers: {\n          Authorization: `Bearer ${authStore.token}`\n        }\n      }).then(response => {\n        console.log(response.data);\n        authStore.user.name = response.data.user;\n        authStore.user.email = response.data.user;\n        authStore.user.phone = response.data.user;\n        authStore.user.address = response.data.user;\n        authStore.user.area = response.data.user;\n        authStore.user.avatar = response.data.user;\n        success.value = response.data.message;\n\n        //wait 5 seconds and set success to null\n        setTimeout(() => {\n          success.value = null;\n        }, 5000);\n        loading.dismiss();\n      }).catch(err => {\n        error.value = err.response.data.message;\n        console.log(err.response.data);\n        loading.dismiss();\n      });\n    };\n    return {\n      authStore,\n      profile,\n      error,\n      submit,\n      success\n    };\n  },\n  methods: {},\n  components: {\n    // FilePond,\n    IonButtons,\n    IonContent,\n    IonHeader,\n    IonMenuButton,\n    IonPage,\n    IonTitle,\n    IonToolbar,\n    IonInput,\n    IonCard,\n    IonCardHeader,\n    IonCardContent,\n    IonButton,\n    IonLabel\n  }\n};","map":{"version":3,"names":["IonButtons","IonContent","IonHeader","IonMenuButton","IonPage","IonTitle","IonToolbar","IonInput","IonCard","IonCardHeader","IonCardContent","IonButton","IonLabel","loadingController","useAuthStore","axios","ref","reactive","name","data","setup","authStore","error","success","profile","user","email","phone","address","area","avatar","submit","loading","create","message","spinner","present","post","headers","Authorization","token","then","response","console","log","value","setTimeout","dismiss","catch","err","methods","components"],"sources":["C:\\Users\\USER\\Desktop\\home\\src\\views\\reporting\\UserProfile.vue"],"sourcesContent":["<template>\r\n    <ion-page>\r\n      <ion-header :translucent=\"true\">\r\n        <ion-toolbar>\r\n          <ion-buttons slot=\"start\">\r\n            <ion-menu-button style=\"color:#1ca5df\" ></ion-menu-button>\r\n          </ion-buttons>\r\n          <ion-title>My Profile</ion-title>\r\n        </ion-toolbar>\r\n      </ion-header>\r\n  \r\n      <ion-content :fullscreen=\"true\">\r\n        <ion-header collapse=\"condense\">\r\n          <ion-toolbar>\r\n            <ion-title size=\"large\">My Profile</ion-title>\r\n          </ion-toolbar>\r\n        </ion-header>\r\n  \r\n        <div style=\"width:98%;margin:0 auto\">\r\n          <ion-button router-link=\"/\" fill=\"clear\" color=\"#1ca5df\" style=\"margin-top:15px\">back</ion-button>\r\n          \r\n          <ion-card style=\"border-radius:15px;box-shadow:none;width:93%\" color=\"light\">\r\n\r\n            <ion-card-header>\r\n              <img src=\"@/assets/images/account.png\" style=\"display:block;margin:0 auto;width:90px;border-radius:14px\" alt=\"image here\">\r\n            </ion-card-header>\r\n\r\n            <ion-card-content>\r\n              <h4 style=\"font-weight:900;text-align:center;margin-bottom:10px\" >{{ authStore.user.name }}</h4>\r\n\r\n              <div class=\"error-container\" v-if=\"error\">\r\n                {{ error }}\r\n            </div>\r\n\r\n              <div class=\"success-container\" v-if=\"success\">\r\n                  {{ success }}\r\n              </div>\r\n\r\n              <div class=\"mt-1\">\r\n                <ion-label class=\"fw-bold dark-text\">Names</ion-label>\r\n                <ion-input v-model=\"profile.name\" type=\"text\" class=\"form-control\" placeholder=\"Enter Full Names\"></ion-input>\r\n              </div>\r\n\r\n              <div class=\"mt-1\">\r\n                <ion-label class=\"fw-bold dark-text\">Email</ion-label>\r\n                <ion-input disabled v-model=\"profile.email\" type=\"email\" class=\"form-control\" placeholder=\"Enter Email\"></ion-input>\r\n              </div>\r\n\r\n              \r\n              <div class=\"mt-1\">\r\n                <ion-label class=\"fw-bold dark-text\">Phone</ion-label>\r\n                <ion-input v-model=\"profile.phone\" type=\"number\" class=\"form-control\" placeholder=\"Enter Phone\"></ion-input>\r\n              </div>\r\n\r\n              <div class=\"mt-1\">\r\n                <ion-label class=\"fw-bold dark-text\">Postal Address</ion-label>\r\n                <ion-input v-model=\"profile.address\" type=\"text\" class=\"form-control\" placeholder=\"Enter Postal Address\"></ion-input>\r\n              </div>\r\n\r\n              <div class=\"mt-1\">\r\n                <ion-label class=\"fw-bold dark-text\">Physical Address</ion-label>\r\n                <ion-input v-model=\"profile.area\" type=\"text\" class=\"form-control\" placeholder=\"Enter Physical Address\"></ion-input>\r\n              </div>\r\n\r\n\r\n              <br>\r\n              <ion-button @click=\"submit\" class=\"red-btn\" style=\"margin:0 auto;display:block;width:70%;--box-shadow:none\">Update Profile</ion-button>\r\n\r\n            </ion-card-content>\r\n\r\n          </ion-card>\r\n\r\n        </div>\r\n      </ion-content>\r\n    </ion-page>\r\n  </template>\r\n  \r\n  <script >\r\n\r\n    import { IonButtons, IonContent, IonHeader, IonMenuButton, IonPage, IonTitle, IonToolbar, IonInput,\r\n    IonCard, IonCardHeader, IonCardContent, IonButton, IonLabel, loadingController } from '@ionic/vue';\r\n\r\n    import {  useAuthStore } from '@/stores/auth.js';\r\n    import axios from 'axios';\r\n\r\n    import { ref, reactive } from 'vue';\r\n    // import { useRoute } from 'vue-router'\r\n    export default {\r\n        name: \"user-profile\",\r\n        data: function () {\r\n            return { };\r\n        },\r\n        setup(){\r\n            const authStore = useAuthStore();\r\n            const error = ref(null)\r\n            const success = ref(null)\r\n\r\n            const profile = reactive({\r\n                name : authStore.user.name,\r\n                email: authStore.user.email,\r\n                phone: authStore.user.phone,\r\n                address: authStore.user.address,\r\n                area: authStore.user.area,\r\n                avatar: authStore.user.avatar,\r\n            })\r\n\r\n            const submit = async () => {\r\n\r\n              const loading = await loadingController.create({\r\n                  message: 'Updating Proile...',\r\n                  spinner: 'bubbles'\r\n              });\r\n\r\n              loading.present();\r\n\r\n                await axios.post('/api/v1/auth/update-profile', profile,{\r\n                  headers: {\r\n                    Authorization: `Bearer ${authStore.token}`,\r\n                  },\r\n                })\r\n                .then((response) => {\r\n                    console.log(response.data);\r\n\r\n                      authStore.user.name = response.data.user\r\n                      authStore.user.email = response.data.user\r\n                      authStore.user.phone = response.data.user\r\n                      authStore.user.address = response.data.user\r\n                      authStore.user.area = response.data.user\r\n                      authStore.user.avatar = response.data.user\r\n\r\n                    success.value = response.data.message\r\n\r\n                    //wait 5 seconds and set success to null\r\n                    setTimeout(() => {\r\n                      success.value = null\r\n                    }, 5000);\r\n                    \r\n                    loading.dismiss();\r\n\r\n                })\r\n                .catch((err) => {\r\n                    error.value = err.response.data.message\r\n                    console.log(err.response.data);\r\n                    loading.dismiss();\r\n                });\r\n\r\n              }\r\n\r\n            return { authStore, profile, error, submit, success}\r\n        },\r\n        methods: {\r\n   \r\n        },\r\n        components: {\r\n            // FilePond,\r\n            IonButtons, IonContent, IonHeader, IonMenuButton, IonPage, IonTitle, IonToolbar, IonInput,\r\n            IonCard, IonCardHeader, IonCardContent, IonButton,  IonLabel\r\n        },\r\n    };\r\n  </script>\r\n  \r\n  <style scoped>\r\n  #container {\r\n    text-align: center;\r\n    position: absolute;\r\n    left: 0;\r\n    right: 0;\r\n    top: 50%;\r\n    transform: translateY(-50%);\r\n  }\r\n\r\n  .error-container{\r\n    background-color: #f8d7da;\r\n    border-color: #f5c2c7;\r\n    color: #721c24;\r\n    padding: 0.75rem 1.25rem;\r\n    border: 1px solid transparent;\r\n    border-radius: 14px;\r\n    margin-bottom: 1rem;\r\n  }\r\n\r\n  .success-container{\r\n    background-color: #d4edda;\r\n    border-color: #c3e6cb;\r\n    color: #155724;\r\n    padding: 0.75rem 1.25rem;\r\n    border: 1px solid transparent;\r\n    border-radius: 14px;\r\n    margin-bottom: 1rem;\r\n  }\r\n\r\n  .form-control{\r\n    border-radius: 9px;\r\n    padding:8px;\r\n    margin-top:4px;\r\n    margin-bottom:20px;\r\n    --background: var(--ion-color-primary-contrast) !important;\r\n    background: var(--ion-color-primary-contrast) !important;\r\n  }\r\n  \r\n  #container strong {\r\n    font-size: 20px;\r\n    line-height: 26px;\r\n  }\r\n\r\n  .red-btn{\r\n    --background: #1ca5df21;\r\n    color: #1ca5df;\r\n    --border-radius: 5px;\r\n    font-size: 1rem;\r\n    margin-top:4px;\r\n    --box-shadow:none;\r\n  }\r\n  \r\n  #container p {\r\n    font-size: 16px;\r\n    line-height: 22px;\r\n    color: #8c8c8c;\r\n    margin: 0;\r\n  }\r\n  \r\n  #container a {\r\n    text-decoration: none;\r\n  }\r\n\r\n  \r\n  /* MARGIN STYLING */\r\n  .mt-1{\r\n    margin-top: 10px;\r\n  }\r\n\r\n  .mt-2{\r\n    margin-top: 20px;\r\n  }\r\n\r\n  .mt-3{\r\n    margin-top: 30px;\r\n  }\r\n\r\n  .mt-4{\r\n    margin-top: 40px;\r\n  }\r\n\r\n  .mt-5{\r\n    margin-top: 50px;\r\n  }\r\n\r\n  .mb-1{\r\n    margin-bottom: 10px;\r\n  }\r\n\r\n  .mb-2{\r\n    margin-bottom: 20px;\r\n   }\r\n\r\n    .mb-3{\r\n        margin-bottom: 30px;\r\n    }\r\n\r\n    .mb-4{\r\n        margin-bottom: 40px;\r\n    }\r\n\r\n    .mb-5{\r\n        margin-bottom: 50px;\r\n    }\r\n  </style>\r\n  "],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}