"use strict";(self["webpackChunkhome"]=self["webpackChunkhome"]||[]).push([[903],{8744:(e,n,t)=>{t.r(n),t.d(n,{default:()=>b});var a=t(6252);const o=t.p+"img/panicbutton.0c25e0f5.png",s=e=>((0,a.dD)("data-v-4e20c8fc"),e=e(),(0,a.Cn)(),e),i={style:{width:"100%",display:"flex","align-items":"center","justify-content":"center","flex-direction":"column",height:"80vh"}},l=s((()=>(0,a._)("img",{src:o,style:{display:"block",margin:"0 auto",width:"220px","border-radius":"14px"},alt:"image here"},null,-1)));function r(e,n,t,o,s,r){const c=(0,a.up)("ion-menu-button"),u=(0,a.up)("ion-buttons"),d=(0,a.up)("ion-title"),p=(0,a.up)("ion-toolbar"),m=(0,a.up)("ion-header"),w=(0,a.up)("ion-card-header"),g=(0,a.up)("ion-card"),h=(0,a.up)("ion-content"),f=(0,a.up)("ion-page");return(0,a.wg)(),(0,a.j4)(f,null,{default:(0,a.w5)((()=>[(0,a.Wm)(m,{translucent:!0},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(u,{slot:"start"},{default:(0,a.w5)((()=>[(0,a.Wm)(c,{color:"danger"})])),_:1}),(0,a.Wm)(d,null,{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1})])),_:1})])),_:1}),(0,a.Wm)(h,{fullscreen:!0},{default:(0,a.w5)((()=>[(0,a.Wm)(m,{collapse:"condense"},{default:(0,a.w5)((()=>[(0,a.Wm)(p,null,{default:(0,a.w5)((()=>[(0,a.Wm)(d,{size:"large"},{default:(0,a.w5)((()=>[(0,a.Uk)("Home")])),_:1})])),_:1})])),_:1}),(0,a._)("div",i,[(0,a.Wm)(g,{style:{"border-radius":"15px","box-shadow":"none",width:"93%"},onClick:o.panic},{default:(0,a.w5)((()=>[(0,a.Wm)(w,null,{default:(0,a.w5)((()=>[l])),_:1})])),_:1},8,["onClick"])])])),_:1})])),_:1})}var c=t(1194),u=t(9895);const d=(0,u.fo)("Geolocation",{web:()=>t.e(642).then(t.bind(t,6642)).then((e=>new e.GeolocationWeb))});var p=t(2262),m=t(9865),w=t(6154);t(9642),t(4571);const g={name:"app",data:function(){return{myFiles:[]}},setup(){const e=(0,m.t)(),n=(0,p.iH)(),t=(0,p.iH)(),a=(0,p.iH)(null),o=(0,p.iH)(!1);let s=null;const i=(0,p.qj)({location:n.value}),l=async()=>{const l=await c.G0.create({message:"Sending Panic Alert...",spinner:"bubbles"});await l.present(),await r(),"denied"==t.value?(s=await c.Cl.create({header:"Location Permission Denied",message:"Please enable location permission to use this feature.",buttons:["OK"]}),await s.present()):await w.Z.post("https://gae.co.bw/api/v1/report/panic_mode",{location:n.value},{headers:{Authorization:`Bearer ${e.token}`}}).then((async e=>{console.log(e.data),i.location="",o.value=!0,l.dismiss(),s=await c.Cl.create({header:"Panic Alert Sent âœ…",message:"Your distress signal has been sent to the nearest police station. Please wait for assistance.",buttons:["OK"]}),await s.present()})).catch((async e=>{a.value=e.response.data.error,console.log(e.response.data),l.dismiss(),s=await c.Cl.create({header:"Failed Panic Alert",message:e.response.data.message,buttons:["OK"]}),await s.present()})),l.dismiss()},r=async()=>{const e=await d.checkPermissions();t.value=e,"denied"===e.location?console.log("Location permission denied."):"granted"===e.location?(console.log("Location permission granted."),g()):(console.log("Location permission not requested. Requesting permission now."),u()),g()},u=async()=>{const e=await d.requestPermissions();t.value=e,"granted"===e.location?(console.log("Location permission granted."),g()):console.log("Location permission denied.")},g=async()=>{const e=await d.getCurrentPosition();n.value=e};return{panic:l}},methods:{},components:{IonButtons:c.Sm,IonContent:c.W2,IonHeader:c.Gu,IonMenuButton:c.fG,IonPage:c._i,IonTitle:c.wd,IonToolbar:c.sr,IonCard:c.PM,IonCardHeader:c.Zi}};var h=t(3744);const f=(0,h.Z)(g,[["render",r],["__scopeId","data-v-4e20c8fc"]]),b=f}}]);
//# sourceMappingURL=903.b894f326.js.map